{"ast":null,"code":"import { EMPTY } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/cif-code.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../tree-node/tree-node.component\";\n\nfunction CifTreeComponent_ng_container_3_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelement(1, \"app-tree-node\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"node\", node_r5);\n  }\n}\n\nfunction CifTreeComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ul\", 3);\n    i0.ɵɵtemplate(2, CifTreeComponent_ng_container_3_li_2_Template, 2, 1, \"li\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const nodes_r3 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", nodes_r3);\n  }\n}\n\nfunction CifTreeComponent_ng_template_5_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r6.errorMsg);\n  }\n}\n\nfunction CifTreeComponent_ng_template_5_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Cargando \\u00E1rbol...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CifTreeComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CifTreeComponent_ng_template_5_div_0_Template, 3, 1, \"div\", 1);\n    i0.ɵɵtemplate(1, CifTreeComponent_ng_template_5_ng_template_1_Template, 2, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(2);\n\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.errorMsg)(\"ngIfElse\", _r7);\n  }\n}\n\nexport class CifTreeComponent {\n  constructor(cifCodeService) {\n    this.cifCodeService = cifCodeService;\n    this.errorMsg = '';\n  }\n\n  ngOnInit() {\n    this.tree$ = this.cifCodeService.getTree().pipe(catchError(err => {\n      // Manejamos el error\n      this.errorMsg = 'Error al cargar los datos: ' + err.message;\n      return EMPTY; // Devolvemos un observable vacío para que no falle\n    }));\n  }\n\n}\n\nCifTreeComponent.ɵfac = function CifTreeComponent_Factory(t) {\n  return new (t || CifTreeComponent)(i0.ɵɵdirectiveInject(i1.CifCodeService));\n};\n\nCifTreeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CifTreeComponent,\n  selectors: [[\"app-cif-tree\"]],\n  decls: 7,\n  vars: 4,\n  consts: [[1, \"tree-container\"], [4, \"ngIf\", \"ngIfElse\"], [\"loadingOrError\", \"\"], [1, \"tree-root\"], [4, \"ngFor\", \"ngForOf\"], [3, \"node\"], [\"loading\", \"\"], [1, \"error\"]],\n  template: function CifTreeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n      i0.ɵɵtext(2, \"\\u00C1rbol de C\\u00F3digos CIF\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, CifTreeComponent_ng_container_3_Template, 3, 1, \"ng-container\", 1);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵtemplate(5, CifTreeComponent_ng_template_5_Template, 3, 2, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(6);\n\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 2, ctx.tree$))(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.TreeNodeComponent, i2.AsyncPipe],\n  styles: [\".tree-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\r\\n  list-style-type: none; \\r\\n  padding-left: 20px;    \\r\\n}\\r\\n\\r\\n.tree-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n  margin: 5px 0;\\r\\n}\\r\\n\\r\\n.tree-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\r\\n  color: #333;\\r\\n}\\r\\n\\r\\n.error[_ngcontent-%COMP%] {\\r\\n  color: red;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNpZi10cmVlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNERBQTREOztBQUU1RDtFQUNFLHFCQUFxQixFQUFFLHNCQUFzQjtFQUM3QyxrQkFBa0IsS0FBSyxxQkFBcUI7QUFDOUM7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxVQUFVO0FBQ1oiLCJmaWxlIjoiY2lmLXRyZWUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIFBvbiBlc3RvIGVuIHN0eWxlcy5jc3MgbyBkaXbDrWRlbG8gZW50cmUgbG9zIGNvbXBvbmVudGVzICovXHJcblxyXG4udHJlZS1jb250YWluZXIgdWwge1xyXG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsgLyogUXVpdGEgbG9zIGJ1bGxldHMgKi9cclxuICBwYWRkaW5nLWxlZnQ6IDIwcHg7ICAgIC8qIMKhTGEgaW5kZW50YWNpw7NuISAqL1xyXG59XHJcblxyXG4udHJlZS1jb250YWluZXIgbGkge1xyXG4gIG1hcmdpbjogNXB4IDA7XHJcbn1cclxuXHJcbi50cmVlLWNvbnRhaW5lciBzdHJvbmcge1xyXG4gIGNvbG9yOiAjMzMzO1xyXG59XHJcblxyXG4uZXJyb3Ige1xyXG4gIGNvbG9yOiByZWQ7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"AACA,SAAqBA,KAArB,QAAkC,MAAlC;AACA,SAASC,UAAT,QAA2B,gBAA3B;;;;;;;;ICKMC;IACEA;IACFA;;;;;IADiBA;IAAAA;;;;;;IALrBA;IAEEA;IAEEA;IAIFA;IACFA;;;;;IALyBA;IAAAA;;;;;;IAQvBA,4BAAoC,CAApC,EAAoC,GAApC,EAAoC,CAApC;IACmBA;IAAcA;;;;;IAAdA;IAAAA;;;;;;IAGjBA;IAAGA;IAAiBA;;;;;;IAJtBA;IAGAA;;;;;;;IAHMA,uCAAgB,UAAhB,EAAgBC,GAAhB;;;;ADJV,OAAM,MAAOC,gBAAP,CAAuB;EAM3BC,YAAoBC,cAApB,EAAkD;IAA9B;IAFb,gBAAmB,EAAnB;EAEgD;;EAEvDC,QAAQ;IACN,KAAKC,KAAL,GAAa,KAAKF,cAAL,CAAoBG,OAApB,GAA8BC,IAA9B,CACXT,UAAU,CAACU,GAAG,IAAG;MACf;MACA,KAAKC,QAAL,GAAgB,gCAAgCD,GAAG,CAACE,OAApD;MACA,OAAOb,KAAP,CAHe,CAGD;IACf,CAJS,CADC,CAAb;EAOD;;AAhB0B;;;mBAAhBI,kBAAgBF;AAAA;;;QAAhBE;EAAgBU;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCX7BhB,+BAA4B,CAA5B,EAA4B,IAA5B;MACMA;MAAoBA;MAExBA;;MAWAA;MASFA;;;;;;MApBiBA;MAAAA,uDAAoB,UAApB,EAAoBiB,GAApB","names":["EMPTY","catchError","i0","_r7","CifTreeComponent","constructor","cifCodeService","ngOnInit","tree$","getTree","pipe","err","errorMsg","message","selectors","decls","vars","consts","template","_r1"],"sourceRoot":"","sources":["D:\\Nueva carpeta\\Shogai-internal\\ultimoAhoraSi\\src\\app\\features\\cif-tree\\cif-tree.component.ts","D:\\Nueva carpeta\\Shogai-internal\\ultimoAhoraSi\\src\\app\\features\\cif-tree\\cif-tree.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable, EMPTY } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { CifNode } from '../../core/models/Cif-code';\nimport { CifCodeService } from '../../core/services/cif-code.service';\n\n@Component({\n  selector: 'app-cif-tree',\n  templateUrl: './cif-tree.component.html',\n  styleUrls: ['./cif-tree.component.css']\n})\nexport class CifTreeComponent implements OnInit {\n\n  // Creamos un Observable para el template\n  public tree$: Observable<CifNode[]>;\n  public errorMsg: string = '';\n\n  constructor(private cifCodeService: CifCodeService) { }\n\n  ngOnInit(): void {\n    this.tree$ = this.cifCodeService.getTree().pipe(\n      catchError(err => {\n        // Manejamos el error\n        this.errorMsg = 'Error al cargar los datos: ' + err.message;\n        return EMPTY; // Devolvemos un observable vacío para que no falle\n      })\n    );\n  }\n}","<div class=\"tree-container\">\n  <h2>Árbol de Códigos CIF</h2>\n\n  <ng-container *ngIf=\"tree$ | async as nodes; else loadingOrError\">\n    \n    <ul class=\"tree-root\">\n      \n      <li *ngFor=\"let node of nodes\">\n        <app-tree-node [node]=\"node\"></app-tree-node>\n      </li>\n    \n    </ul>\n  </ng-container>\n\n  <ng-template #loadingOrError>\n    <div *ngIf=\"errorMsg; else loading\">\n      <p class=\"error\">{{ errorMsg }}</p>\n    </div>\n    <ng-template #loading>\n      <p>Cargando árbol...</p>\n    </ng-template>\n  </ng-template>\n\n</div>"]},"metadata":{},"sourceType":"module"}